<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í”„ë¡œì íŠ¸ í—ˆë¸Œ â€” ì™•ì™• ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#121a33; --ink:#e9efff; --muted:#a6b3d9; --line:#243166; --accent:#7aa2ff;
      --good:#10b981; --warn:#f59e0b; --bad:#ef4444; --radius:18px; --shadow:0 10px 28px rgba(9,12,28,.28);
    }
    body{margin:0;background:radial-gradient(1200px 800px at 10% -10%, #0e1735 0%, #0b1020 60%);color:var(--ink);
         font:14px/1.55 ui-sans-serif,system-ui,"Pretendard","Noto Sans KR",Apple SD Gothic Neo,Arial}
    .wrap{max-width:1200px;margin:0 auto;padding:22px 16px 48px}
    header{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
    h1{font-size:24px;margin:0 10px 0 0;display:flex;gap:10px;align-items:center}
    .pill{display:inline-flex;gap:6px;align-items:center;background:#0d1530;border:1px solid var(--line);color:var(--muted);
          padding:10px 12px;border-radius:999px}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    input[type="search"], select{background:#0d1530;border:1px solid var(--line);color:var(--ink);padding:10px 12px;border-radius:12px}
    input[type="search"]{width:230px}
    .btn{background:linear-gradient(180deg,#2f49a2,#23377a);border:1px solid #2e3f78;color:#fff;padding:10px 12px;border-radius:12px;cursor:pointer}
    .btn.ghost{background:#0d1530;color:var(--ink);border:1px solid var(--line)}
    .grid{margin-top:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,rgba(18,26,51,.9),rgba(12,18,36,.9));border:1px solid rgba(66,90,150,.45);border-radius:var(--radius);
          box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .thumb{height:120px;display:flex;align-items:center;justify-content:center;background:
           radial-gradient(900px 400px at 70% -20%, rgba(122,162,255,.35), transparent 50%),
           linear-gradient(135deg, rgba(122,162,255,.08), rgba(0,0,0,.06));
           border-bottom:1px solid rgba(120,150,220,.25)}
    .thumb span{font-size:44px;filter:drop-shadow(0 6px 20px rgba(0,0,0,.45))}
    .body{padding:14px 14px 12px;display:flex;flex-direction:column;gap:10px}
    .title{display:flex;justify-content:space-between;gap:8px}
    .title h3{margin:0;font-size:16px;line-height:1.35}
    .title button{background:#0d1530;border:1px solid var(--line);border-radius:12px;padding:6px 8px;color:var(--muted);cursor:pointer}
    .desc{color:var(--muted);min-height:38px}
    .tags{display:flex;flex-wrap:wrap;gap:6px}
    .tag{font-size:12px;color:#c7d2fe;background:rgba(122,162,255,.12);border:1px solid rgba(122,162,255,.25);padding:5px 7px;border-radius:999px}
    .meta{display:flex;justify-content:space-between;color:#8aa1e0;font-size:12px}
    .actions{display:flex;gap:8px;margin-top:6px}
    .actions a{flex:1;text-align:center;text-decoration:none;color:#fff;background:linear-gradient(180deg,#3b82f6,#2f62c7);border:1px solid #2f4fa2;padding:8px 10px;border-radius:10px}
    .actions a.ghost{background:#0d1530;border:1px solid var(--line);color:var(--ink)}
    .empty{opacity:.7;border:1px dashed #2d3a66;border-radius:16px;padding:18px;text-align:center}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(120,150,220,.35),transparent);margin:16px 0}
    /* modal */
    dialog{border:none;border-radius:16px;max-width:720px;width:96%;background:#0c1534;color:var(--ink);
           border:1px solid #2b3970;box-shadow:var(--shadow)}
    dialog::backdrop{background:rgba(2,6,23,.6)}
    .modal h2{margin:0 0 8px}
    .form{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .form label{font-size:12px;color:#c0c8ea}
    .form input,.form textarea,.form select{width:100%;background:#0b132b;color:var(--ink);border:1px solid #324a88;border-radius:12px;padding:10px}
    .form textarea{grid-column:1/-1;min-height:90px}
    .right{margin-left:auto}
    .hidden{display:none}
    /* light mode toggle (optional) */
    .light{--bg:#f6f9ff; --panel:#ffffff; --ink:#0f172a; --muted:#5b657a; --line:#e6eef9; --accent:#2563eb}
    .light body{background:linear-gradient(180deg,#f6f9ff,#ecf3ff)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>
        <span style="display:inline-flex;width:28px;height:28px;border-radius:8px;align-items:center;justify-content:center;background:#16234d;border:1px solid #2d3a66">âš›ï¸</span>
        í”„ë¡œì íŠ¸ í—ˆë¸Œ
        <span class="pill" title="ì´ í”„ë¡œì íŠ¸ ìˆ˜"><span id="count">0</span>ê°œ</span>
      </h1>
      <div class="controls">
        <input id="q" type="search" placeholder="ê²€ìƒ‰: ì œëª©Â·íƒœê·¸" />
        <select id="cat">
          <option value="">ëª¨ë“  ë¶„ë¥˜</option>
          <option>ì‹œë®¬ë ˆì´ì…˜</option>
          <option>ì „ì/ë°˜ë„ì²´</option>
          <option>ê´‘í•™</option>
          <option>ìƒëŒ€ì„±</option>
          <option>ë°ì´í„°ë„êµ¬</option>
          <option>ì›¹ì•±</option>
        </select>
        <select id="sort">
          <option value="updated">ìµœì‹ ìˆœ</option>
          <option value="title">ê°€ë‚˜ë‹¤ìˆœ</option>
          <option value="category">ë¶„ë¥˜ìˆœ</option>
        </select>
        <button class="btn ghost" id="toggleTheme" title="ë¼ì´íŠ¸/ë‹¤í¬">ğŸŒ“ í…Œë§ˆ</button>
        <button class="btn" id="add">ï¼‹ í”„ë¡œì íŠ¸ ì¶”ê°€</button>
        <button class="btn ghost" id="exportBtn">ë‚´ë³´ë‚´ê¸°</button>
        <label class="btn ghost" for="importFile" style="cursor:pointer">ë¶ˆëŸ¬ì˜¤ê¸°</label>
        <input id="importFile" type="file" accept="application/json" class="hidden" />
      </div>
    </header>

    <div class="divider"></div>

    <main id="grid" class="grid" aria-live="polite"></main>

    <template id="card-tpl">
      <article class="card">
        <div class="thumb"><span>ğŸ§ª</span></div>
        <div class="body">
          <div class="title">
            <h3></h3>
            <button class="pin" title="ì¦ê²¨ì°¾ê¸°">â˜†</button>
          </div>
          <p class="desc"></p>
          <div class="tags"></div>
          <div class="meta"><span class="category"></span><span class="date"></span></div>
          <div class="actions">
            <a class="demo" target="_blank" rel="noopener">ë¯¸ë¦¬ë³´ê¸°</a>
            <a class="code ghost" target="_blank" rel="noopener">ì½”ë“œ</a>
          </div>
        </div>
      </article>
    </template>

    <dialog id="modal">
      <div class="modal" style="padding:16px 16px 12px">
        <h2>í”„ë¡œì íŠ¸ ì¶”ê°€/ìˆ˜ì •</h2>
        <form id="form" class="form">
          <div>
            <label>ì œëª©</label>
            <input name="title" required />
          </div>
          <div>
            <label>ë¶„ë¥˜</label>
            <select name="category">
              <option>ì‹œë®¬ë ˆì´ì…˜</option>
              <option>ì „ì/ë°˜ë„ì²´</option>
              <option>ê´‘í•™</option>
              <option>ìƒëŒ€ì„±</option>
              <option>ë°ì´í„°ë„êµ¬</option>
              <option>ì›¹ì•±</option>
            </select>
          </div>
          <div>
            <label>ì—…ë°ì´íŠ¸</label>
            <input name="updated" type="date" />
          </div>
          <div>
            <label>ì´ëª¨ì§€ ì¸ë„¤ì¼(ì„ íƒ)</label>
            <input name="emoji" placeholder="ì˜ˆ: ğŸ› ï¸" />
          </div>
          <div>
            <label>íƒœê·¸(ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
            <input name="tags" placeholder="p5.js, three.js" />
          </div>
          <div>
            <label>ë¯¸ë¦¬ë³´ê¸° URL</label>
            <input name="demo" placeholder="https://..." />
          </div>
          <div>
            <label>ì½”ë“œ URL</label>
            <input name="code" placeholder="https://..." />
          </div>
          <textarea name="desc" placeholder="ê°„ë‹¨í•œ ì„¤ëª…"></textarea>
          <div style="display:flex;gap:8px;justify-content:flex-end">
            <button type="button" class="btn ghost" id="delBtn">ì‚­ì œ</button>
            <button type="button" class="btn ghost" onclick="modal.close()">ì·¨ì†Œ</button>
            <button class="btn" id="saveBtn">ì €ì¥</button>
          </div>
        </form>
      </div>
    </dialog>

    <p class="empty" id="empty" style="display:none">ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  </div>

  <script>
// ê¸°ë³¸ í…Œë§ˆ: ë¼ì´íŠ¸(ë°ì€)ë¡œ ì‹œì‘
document.documentElement.classList.add('light');
  // ---- ë°ì´í„°: ì‹œì‘ ì‹œ ìƒ˜í”Œ(ì›í•˜ëŠ” ëŒ€ë¡œ ìˆ˜ì •) ----
  const initialProjects = [
    {id:uid(), title:"RLC ê³µëª…", category:"ì „ì/ë°˜ë„ì²´", desc:"ì§ë ¬ RLC ê³µëª…/ìœ„ìƒÂ·ì „ë¥˜ ë³€í™” ì‹œê°í™”.", tags:["íšŒë¡œ","ê³µëª…"], emoji:"ğŸ”„", updated: today(), demo:"./RLC ê³µëª….html", code:""},
    {id:uid(), title:"ê°„ì„­ë¬´ëŠ¬", category:"ê´‘í•™", desc:"íŒŒì¥Â·ìŠ¬ë¦¿ ê°„ê²© ì¡°ì ˆë¡œ ê°„ì„­ íŒ¨í„´ ê´€ì°°.", tags:["íŒŒë™","ë¬´ëŠ¬"], emoji:"ğŸ¯", updated: today(), demo:"./ê°„ì„­ë¬´ëŠ¬.html", code:""},
    {id:uid(), title:"ê´‘ì „íš¨ê³¼", category:"ì „ì/ë°˜ë„ì²´", desc:"íŒŒì¥/ì„¸ê¸°ì— ë”°ë¥¸ ê´‘ì „ì ë°©ì¶œê³¼ ì„ê³„ ì£¼íŒŒìˆ˜.", tags:["ê´‘ì","ê¸ˆì†"], emoji:"ğŸ“¸", updated: today(), demo:"./ê´‘ì „íš¨ê³¼.html", code:""},
    {id:uid(), title:"ë‹¤ì´ì˜¤ë“œ", category:"ì „ì/ë°˜ë„ì²´", desc:"PN ì ‘í•©Â·ê³µí•ì¸µÂ·Iâ€“V íŠ¹ì„± ì§ê´€.", tags:["PN","Iâ€“V"], emoji:"ğŸ”Œ", updated: today(), demo:"./ë‹¤ì´ì˜¤ë“œ.html", code:""},
    {id:uid(), title:"ë„í”ŒëŸ¬íš¨ê³¼", category:"ê´‘í•™", desc:"ì´ë™ ìŒì›/ê´€ì¸¡ì ì£¼íŒŒìˆ˜ ë³€í™”ì™€ ë§ˆí•˜ ì½˜.", tags:["ë„í”ŒëŸ¬","íŒŒë™"], emoji:"ğŸµ", updated: today(), demo:"./ë„í”ŒëŸ¬íš¨ê³¼.html", code:""},
    {id:uid(), title:"ëŸ¬ë”í¼ë“œ ì•ŒíŒŒì…ì ì‚°ë€ì‹¤í—˜", category:"ì‹œë®¬ë ˆì´ì…˜", desc:"ê¸ˆë°• í†µê³¼Â·ëŒ€ê° ì‚°ë€Â·ë°˜ì‚¬ í™•ë¥  ì‹œê°í™”.", tags:["ì‚°ë€","ì¿¨ë¡±"], emoji:"ğŸ§ª", updated: today(), demo:"./ëŸ¬ë”í¼ë“œ ì•ŒíŒŒì…ì ì‚°ë€ì‹¤í—˜.html", code:""},
    {id:uid(), title:"ë Œì¦ˆì˜ êµ´ì ˆ", category:"ê´‘í•™", desc:"ë³¼ë¡/ì˜¤ëª©Â·ì‹¤ìƒ/í—ˆìƒ êµ¬ì„±ê³¼ ë³´ì¡°ì„ .", tags:["ë Œì¦ˆ","ìƒ"], emoji:"ğŸ”­", updated: today(), demo:"./ë Œì¦ˆì˜ êµ´ì ˆ.html", code:""},
    {id:uid(), title:"ë°œê´‘ ë‹¤ì´ì˜¤ë“œ", category:"ì „ì/ë°˜ë„ì²´", desc:"íŒŒì¥ë³„ ì „ì••Â·ë°´ë“œê°­ê³¼ ë°œê´‘.", tags:["LED","ë°´ë“œê°­"], emoji:"ğŸ’¡", updated: today(), demo:"./ë°œê´‘ ë‹¤ì´ì˜¤ë“œ.html", code:""},
    {id:uid(), title:"ìƒëŒ€ì„±ì´ë¡ ", category:"ìƒëŒ€ì„±", desc:"ê¸¸ì´ìˆ˜ì¶•Â·ì‹œê³µê°„ ì‹œê°í™”(ìš°ì£¼ì„ /ë³„).", tags:["íŠ¹ìˆ˜","ì¼ë°˜"], emoji:"ğŸš€", updated: today(), demo:"./ìƒëŒ€ì„±ì´ë¡ .html", code:""},
    {id:uid(), title:"ìŠ¤ë„¬ì˜ ë²•ì¹™", category:"ê´‘í•™", desc:"êµ´ì ˆë¥  ë³€í™”ì— ë”°ë¥¸ ì…ì‚¬/êµ´ì ˆ/ì„ê³„ê°.", tags:["n1,n2","TIR"], emoji:"ğŸ“", updated: today(), demo:"./ìŠ¤ë„¬ì˜ ë²•ì¹™.html", code:""},
    {id:uid(), title:"êµ´ì ˆê°", category:"ê´‘í•™", desc:"ê°ë„ ë³´ì¡°í˜¸/í‘œì‹ìœ¼ë¡œ ê°ë„ ê´€ê³„ í•™ìŠµ.", tags:["ê°ë„","ë³´ì¡°ì„ "], emoji:"ğŸ§­", updated: today(), demo:"./êµ´ì ˆê°.html", code:""},
    {id:uid(), title:"ì˜´ì˜ ë²•ì¹™", category:"ì „ì/ë°˜ë„ì²´", desc:"V=IR, ì§ë ¬/ë³‘ë ¬ ì§ê´€, ì „ë¥˜ íë¦„ ì• ë‹ˆë©”ì´ì…˜.", tags:["ì „ì••","ì „ë¥˜"], emoji:"âš¡", updated: today(), demo:"./ì˜´ì˜ ë²•ì¹™.html", code:""},
    {id:uid(), title:"ì›ìëª¨í˜•", category:"ì‹œë®¬ë ˆì´ì…˜", desc:"ë³´ì–´/ì˜¤ë¹„íƒˆ/ì „ìêµ¬ë¦„ ê°œë… ì‹œê°í™”.", tags:["ì›ì","ì¤€ìœ„"], emoji:"ğŸ§¬", updated: today(), demo:"./ì›ìëª¨í˜•.html", code:""},
    {id:uid(), title:"ì´ì¤‘ìŠ¬ë¦¿", category:"ê´‘í•™", desc:"í™•ë¥ íŒŒë™Â·ê°„ì„­ë¬´ëŠ¬Â·íŒŒë¼ë¯¸í„° ì¡°ì ˆ.", tags:["ìŠ¬ë¦¿","ê°„ì„­"], emoji:"ã€°ï¸", updated: today(), demo:"./ì´ì¤‘ìŠ¬ë¦¿.html", code:""}
  ];

  // ---- ìƒíƒœ ----
  let projects = load() ?? initialProjects;
  let currentId = null;

  // ---- ìš”ì†Œ ----
  const grid = document.getElementById('grid');
  const q = document.getElementById('q');
  const cat = document.getElementById('cat');
  const sortSel = document.getElementById('sort');
  const count = document.getElementById('count');
  const empty = document.getElementById('empty');
  const modal = document.getElementById('modal');
  const form = document.getElementById('form');
  const delBtn = document.getElementById('delBtn');

  // ---- ì´ë²¤íŠ¸ ----
  document.getElementById('add').onclick = () => { currentId = null; form.reset(); modal.showModal(); };
  document.getElementById('toggleTheme').onclick = () => document.documentElement.classList.toggle('light');
  document.getElementById('exportBtn').onclick = () => exportJSON();
  document.getElementById('importFile').addEventListener('change', importJSON);
  form.addEventListener('submit', e => { e.preventDefault(); saveFromForm(); });
  delBtn.addEventListener('click', () => { if(!currentId) return modal.close(); projects = projects.filter(p=>p.id!==currentId); persist(); modal.close(); render(); });
  q.addEventListener('input', render);
  cat.addEventListener('change', render);
  sortSel.addEventListener('change', render);

  // ---- ë Œë”ë§ ----
  function render(){
    grid.innerHTML = '';
    let list = [...projects];

    // í•„í„°
    const term = q.value.trim().toLowerCase();
    if(term){ list = list.filter(p=> (p.title+p.desc+p.category+p.tags.join(',')) .toLowerCase().includes(term)); }
    if(cat.value){ list = list.filter(p=> p.category===cat.value); }

    // ì •ë ¬
    const by = sortSel.value;
    list.sort((a,b)=>{
      if(by==='title') return a.title.localeCompare(b.title,'ko');
      if(by==='category') return a.category.localeCompare(b.category,'ko') || a.title.localeCompare(b.title,'ko');
      // updated
      return (b.updated||'').localeCompare(a.updated||'');
    });

    // ì¦ê²¨ì°¾ê¸° ìš°ì„ 
    list.sort((a,b)=> (b.pinned?1:0) - (a.pinned?1:0));

    count.textContent = list.length;
    empty.style.display = list.length? 'none':'block';

    for(const p of list){ grid.append(makeCard(p)); }
  }

  function makeCard(p){
    const $ = s => node.querySelector(s);
    const node = document.getElementById('card-tpl').content.firstElementChild.cloneNode(true);
    $('.thumb span').textContent = p.emoji || pickEmoji(p.category);
    $('h3').textContent = p.title;
    $('.desc').textContent = p.desc || '';
    $('.category').textContent = p.category;
    $('.date').textContent = p.updated ? `ì—…ë°ì´íŠ¸ ${p.updated}` : '';

    const tags = $('.tags'); tags.innerHTML='';
    (p.tags||[]).forEach(t=>{ const chip=document.createElement('span'); chip.className='tag'; chip.textContent=t; tags.append(chip); });

    const demo = $('.demo'); demo.href = p.demo || '#'; demo.classList.toggle('ghost', !p.demo);
    const code = $('.code'); code.href = p.code || '#'; code.classList.toggle('ghost', !p.code);

    const pinBtn = node.querySelector('.pin');
    pinBtn.textContent = p.pinned ? 'â˜…' : 'â˜†';
    pinBtn.onclick = (e)=>{ e.stopPropagation(); p.pinned = !p.pinned; persist(); render(); };

    node.onclick = (e)=>{ if(e.target.tagName==='A' || e.target.classList.contains('pin')) return; openEditor(p); };
    return node;
  }

  // ---- í¸ì§‘ ----
  function openEditor(p){
    currentId = p?.id ?? null;
    form.title.value = p?.title || '';
    form.category.value = p?.category || 'ì‹œë®¬ë ˆì´ì…˜';
    form.updated.value = p?.updated || today();
    form.emoji.value = p?.emoji || '';
    form.tags.value = (p?.tags||[]).join(', ');
    form.demo.value = p?.demo || '';
    form.code.value = p?.code || '';
    form.desc.value = p?.desc || '';
    delBtn.style.visibility = currentId ? 'visible':'hidden';
    modal.showModal();
  }

  function saveFromForm(){
    const data = {
      id: currentId || uid(),
      title: form.title.value.trim(),
      category: form.category.value,
      updated: form.updated.value || today(),
      emoji: form.emoji.value.trim(),
      tags: form.tags.value.split(',').map(s=>s.trim()).filter(Boolean),
      demo: form.demo.value.trim(),
      code: form.code.value.trim(),
      desc: form.desc.value.trim(),
      pinned: (currentId ? projects.find(p=>p.id===currentId)?.pinned : false) || false,
    };
    const i = projects.findIndex(p=>p.id === data.id);
    if(i>-1) projects[i]=data; else projects.unshift(data);
    persist(); modal.close(); render();
  }

  // ---- ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ----
  function persist(){
    localStorage.setItem('project-hub', JSON.stringify(projects));
  }
  function load(){
    try{ return JSON.parse(localStorage.getItem('project-hub')||'null'); }catch{ return null }
  }
  function exportJSON(){
    const blob = new Blob([JSON.stringify(projects,null,2)], {type:'application/json'});
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `projects-${Date.now()}.json`; a.click();
  }
  function importJSON(e){
    const file = e.target.files?.[0]; if(!file) return;
    const reader = new FileReader(); reader.onload = () => {
      try{ const arr = JSON.parse(reader.result);
        if(Array.isArray(arr)){ projects = arr; persist(); render(); }
        else alert('ì˜¬ë°”ë¥¸ JSON ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤.');
      }catch(err){ alert('JSON íŒŒì‹± ì˜¤ë¥˜: '+err.message); }
    }; reader.readAsText(file);
  }

  // ---- ìœ í‹¸ ----
  function uid(){ return Math.random().toString(36).slice(2,10); }
  function today(){ return new Date().toISOString().slice(0,10); }
  function pickEmoji(cat){
    return ({'ì‹œë®¬ë ˆì´ì…˜':'ğŸ§ª','ì „ì/ë°˜ë„ì²´':'ğŸ”Œ','ê´‘í•™':'ğŸ”¬','ìƒëŒ€ì„±':'ğŸ›°ï¸','ë°ì´í„°ë„êµ¬':'ğŸ“Š','ì›¹ì•±':'ğŸ§©'})[cat] || 'ğŸ§©';
  }

  // ì´ˆê¸° ë Œë”
  render();
  </script>
</body>
</html>
